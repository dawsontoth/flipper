body {
  font-family: Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
  background: radial-gradient(circle at top, #f7f7ff, #eef1f6);
  color: #111827;
}

/* Top pinned recreation banner */
.recreation-banner {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  width: 100%;
  z-index: 1000;
  padding: 10px 12px;
  background: #111;
  color: #fff;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  font-size: 14px;
  line-height: 1.3;
  text-align: center;
}

.recreation-banner__link {
  color: #7dd3fc;
  text-decoration: underline;
}

/* Make room for the pinned banner */
body {
  padding-top: 44px;
  box-sizing: border-box;
}

/* Mobile: banner becomes taller; adjust layout height + padding so content isn't clipped */
@media (max-width: 520px) {
  .recreation-banner {
    padding: 12px 10px;
    font-size: 13px;
    line-height: 1.35;
    white-space: normal;
    word-break: break-word;
  }

  body {
    /* ensure room for 2 lines of banner text on small screens */
    padding-top: 72px;
    height: auto;
    min-height: 100vh;
    align-items: flex-start;
    padding-bottom: 16px;
  }
}

/* --- 10-heads win explosion --- */
.win-explosion {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 2000;
  opacity: 0;
}

.win-explosion.go {
  opacity: 1;
  animation: win-shake 0.9s ease-in-out 0s 1;
}

/* Win modal */
.win-modal {
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  padding: 1.25rem;
  background: rgba(0, 0, 0, 0.55);
  backdrop-filter: blur(6px);
  z-index: 2500;
}

.win-modal.show {
  display: flex;
}

.win-modal__card {
  width: min(520px, 100%);
  border-radius: 18px;
  padding: 1.25rem 1.25rem 1rem 1.25rem;
  background: white;
  color: #111827;
  box-shadow: 0 18px 60px rgba(0, 0, 0, 0.35);
  text-align: center;
}

.win-modal__title {
  font-size: 1.4rem;
  font-weight: 900;
  margin-bottom: 0.25rem;
}

.win-modal__subtitle {
  font-size: 1rem;
  font-weight: 700;
  color: #6b7280;
  margin-bottom: 1rem;
}

.win-modal__actions {
  display: flex;
  gap: 0.75rem;
  justify-content: center;
  flex-wrap: wrap;
}

@media (max-width: 520px) {
  .win-modal__card {
    padding: 1.05rem 1rem 0.9rem 1rem;
  }
}

@media (prefers-color-scheme: dark) {
  .win-modal__card {
    background: #0f172a;
    color: #f3f4f6;
    border: 1px solid #1f2937;
  }

  .win-modal__subtitle {
    color: #9ca3af;
  }
}

/* layered blasts */
.win-explosion.go::before,
.win-explosion.go::after {
  content: "";
  position: absolute;
  inset: -30vmax;
  background:
    radial-gradient(circle at 20% 30%, rgba(255, 0, 128, 0.75), rgba(255, 0, 128, 0) 55%),
    radial-gradient(circle at 80% 35%, rgba(0, 255, 234, 0.75), rgba(0, 255, 234, 0) 55%),
    radial-gradient(circle at 55% 75%, rgba(255, 230, 0, 0.75), rgba(255, 230, 0, 0) 55%),
    radial-gradient(circle at 30% 80%, rgba(96, 165, 250, 0.75), rgba(96, 165, 250, 0) 55%),
    radial-gradient(circle at 70% 60%, rgba(34, 197, 94, 0.65), rgba(34, 197, 94, 0) 55%);
  mix-blend-mode: screen;
  filter: blur(0px) saturate(1.2);
  transform: scale(0.2) rotate(-12deg);
  opacity: 0;
}

.win-explosion.go::before {
  animation: win-burst 1.35s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

.win-explosion.go::after {
  animation: win-burst2 1.6s cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

@keyframes win-burst {
  0% {
    opacity: 0;
    transform: scale(0.2) rotate(-18deg);
    filter: blur(6px) saturate(1.1);
  }
  20% {
    opacity: 1;
    filter: blur(1px) saturate(1.5);
  }
  60% {
    opacity: 0.95;
    transform: scale(1.05) rotate(8deg);
    filter: blur(0px) saturate(1.8);
  }
  100% {
    opacity: 0;
    transform: scale(1.25) rotate(14deg);
    filter: blur(2px) saturate(1.2);
  }
}

@keyframes win-burst2 {
  0% {
    opacity: 0;
    transform: scale(0.15) rotate(22deg);
    filter: blur(10px) saturate(1.2);
  }
  25% {
    opacity: 0.9;
    filter: blur(2px) saturate(2);
  }
  65% {
    opacity: 0.85;
    transform: scale(1.15) rotate(-6deg);
    filter: blur(0px) saturate(2.2);
  }
  100% {
    opacity: 0;
    transform: scale(1.45) rotate(-14deg);
    filter: blur(3px) saturate(1.4);
  }
}

@keyframes win-shake {
  0% { transform: translate3d(0,0,0); }
  10% { transform: translate3d(-3px, 2px, 0); }
  20% { transform: translate3d(4px, -2px, 0); }
  30% { transform: translate3d(-5px, 3px, 0); }
  40% { transform: translate3d(5px, -3px, 0); }
  50% { transform: translate3d(-4px, 2px, 0); }
  60% { transform: translate3d(3px, -2px, 0); }
  70% { transform: translate3d(-2px, 1px, 0); }
  80% { transform: translate3d(2px, -1px, 0); }
  90% { transform: translate3d(-1px, 1px, 0); }
  100% { transform: translate3d(0,0,0); }
}

@media (prefers-reduced-motion: reduce) {
  .win-explosion.go {
    animation: none;
  }
  .win-explosion.go::before,
  .win-explosion.go::after {
    animation: none;
    opacity: 0;
  }
}

main {
  text-align: center;
  background-color: white;
  padding: 2rem;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  width: min(980px, calc(100vw - 2rem));
  position: relative;
}

.layout {
  display: grid;
  grid-template-columns: 1fr 320px;
  gap: 1.25rem;
  align-items: stretch;
  text-align: left;
}

.panel {
  text-align: center;
  position: relative;
}

.tray {
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  border-radius: 14px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  height: 70vh;
  min-height: 420px;
}

.tray-header {
  padding: 0.9rem 1rem;
  background: rgba(17, 24, 39, 0.04);
  border-bottom: 1px solid #e5e7eb;
  text-align: left;
}

.tray-title {
  font-weight: 800;
  color: #111827;
}

.tray-subtitle {
  margin-top: 0.2rem;
  font-size: 0.85rem;
  color: #6b7280;
}

.tray-log {
  padding: 0.9rem 0.9rem 1rem 0.9rem;
  overflow: auto;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  justify-content: flex-end;
  flex: 1 1 auto;
}

.log-line {
  width: fit-content;
  max-width: 100%;
  background: white;
  border: 1px solid rgba(229, 231, 235, 1);
  border-radius: 14px;
  padding: 0.55rem 0.7rem;
  box-shadow: 0 4px 14px rgba(0, 0, 0, 0.06);
  font-weight: 700;
  color: #111827;
  text-align: left;
}

.log-line.heads {
  border-color: rgba(37, 99, 235, 0.25);
}

.log-line.tails {
  border-color: rgba(5, 150, 105, 0.25);
}

/* Shop purchase entries in the log (right-aligned blue bubble) */
.log-line.shop {
  margin-top: 0;
  margin-left: auto;
  background: rgba(37, 99, 235, 0.12);
  border-color: rgba(37, 99, 235, 0.35);
  color: #1d4ed8;
  text-align: right;
}

h1 {
  margin: 0 0 0.25rem 0;
  color: #1f2937;
}

.subtitle {
  margin: 0 0 1.5rem 0;
  color: #6b7280;
}

.coin {
  width: 180px;
  height: 180px;
  border-radius: 999px;
  margin: 0 auto 1.25rem auto;
  position: relative;
  user-select: none;
  perspective: 900px;
}

.coin-inner {
  width: 100%;
  height: 100%;
  position: relative;
  transform-style: preserve-3d;
  border-radius: 999px;
}

/* --- More realistic 3D coin styling --- */
.coin {
  /* a bit of depth + nicer shadow on the overall object */
  filter: drop-shadow(0 16px 22px rgba(0, 0, 0, 0.18));
}

/* Rim / edge thickness (faked with a pseudo element behind the faces) */
.coin::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 999px;
  background:
    /* golden rim with subtle tarnish banding */
    linear-gradient(90deg,
      rgba(58, 33, 6, 0.55) 0%,
      rgba(255, 236, 176, 0.26) 10%,
      rgba(74, 44, 10, 0.44) 22%,
      rgba(255, 232, 160, 0.20) 34%,
      rgba(64, 38, 9, 0.34) 46%,
      rgba(255, 236, 176, 0.16) 58%,
      rgba(74, 44, 10, 0.40) 70%,
      rgba(255, 232, 160, 0.20) 82%,
      rgba(50, 28, 6, 0.60) 100%
    ),
    radial-gradient(circle at 30% 30%, rgba(255,255,255,0.12), rgba(255,255,255,0) 55%),
    radial-gradient(circle at 70% 80%, rgba(0,0,0,0.18), rgba(0,0,0,0) 60%);
  transform: translateY(8px) scale(0.985);
  filter: blur(0.2px) saturate(1.05);
  opacity: 0.95;
  z-index: 0;
}

/* Ground shadow under the coin */
.coin::after {
  content: "";
  position: absolute;
  left: 50%;
  bottom: -12px;
  width: 78%;
  height: 22%;
  transform: translateX(-50%);
  background: radial-gradient(closest-side, rgba(0,0,0,0.32), rgba(0,0,0,0));
  filter: blur(10px);
  opacity: 0.55;
  z-index: 0;
}

/* Ensure the correct face is visible after the flip animation completes.
   Without this, the coin can land showing the "front" face even when the
   outcome is tails, because the animation ends at a full rotation. */
.coin[data-side="heads"] .coin-inner {
  transform: rotateY(0deg);
}

.coin[data-side="tails"] .coin-inner {
  transform: rotateY(180deg);
}

.coin-side {
  position: absolute;
  inset: 0;
  border-radius: 999px;
  display: grid;
  place-items: center;
  backface-visibility: hidden;
  /* bring faces above rim/shadow pseudo-elements */
  z-index: 1;
  /* richer metallic shading */
  box-shadow:
    inset 10px 12px 18px rgba(255, 255, 255, 0.32),
    inset -14px -18px 28px rgba(0, 0, 0, 0.34),
    inset 0 0 0 2px rgba(255, 255, 255, 0.06),
    0 12px 26px rgba(0, 0, 0, 0.12);
  transform: translateZ(14px);
}

.coin-side::after {
  content: "";
  position: absolute;
  inset: 13px;
  border-radius: 999px;
  /* embossed inner ring */
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,0.35), rgba(255,255,255,0) 45%),
    radial-gradient(circle at 70% 75%, rgba(0,0,0,0.22), rgba(0,0,0,0) 55%);
  border: 2px solid rgba(255, 255, 255, 0.22);
  box-shadow:
    inset 0 2px 10px rgba(255, 255, 255, 0.18),
    inset 0 -10px 18px rgba(0, 0, 0, 0.22);
  opacity: 0.95;
}

.coin-front::after,
.coin-back::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 999px;
  pointer-events: none;
  /* worn / scratched texture approximation */
  background:
    /* grime around edge */
    radial-gradient(circle at 50% 50%, rgba(0,0,0,0) 58%, rgba(62, 37, 9, 0.22) 78%, rgba(0,0,0,0) 92%),
    /* tiny mottling */
    radial-gradient(circle at 22% 44%, rgba(74, 44, 10, 0.14), rgba(74, 44, 10, 0) 40%),
    radial-gradient(circle at 74% 58%, rgba(0, 0, 0, 0.12), rgba(0, 0, 0, 0) 38%),
    radial-gradient(circle at 48% 78%, rgba(255, 244, 210, 0.10), rgba(255, 244, 210, 0) 40%),
    /* fine scratch lines */
    repeating-linear-gradient(18deg,
      rgba(255, 255, 255, 0.08) 0px,
      rgba(255, 255, 255, 0.08) 1px,
      rgba(255, 255, 255, 0.00) 3px,
      rgba(255, 255, 255, 0.00) 8px
    );
  mix-blend-mode: overlay;
  opacity: 0.65;
}

.coin-front {
  /* worn gold */
  background:
    /* soft specular */
    radial-gradient(circle at 28% 22%, rgba(255,255,255,0.42), rgba(255,255,255,0) 45%),
    /* patina shadows */
    radial-gradient(circle at 70% 78%, rgba(0,0,0,0.42), rgba(0,0,0,0) 58%),
    /* subtle "wear" mottling */
    radial-gradient(circle at 18% 62%, rgba(90, 56, 16, 0.22), rgba(90, 56, 16, 0) 55%),
    radial-gradient(circle at 62% 34%, rgba(255, 232, 167, 0.18), rgba(255, 232, 167, 0) 55%),
    /* base gold gradient */
    linear-gradient(155deg, #ffe08a 0%, #f6c453 35%, #c9921a 72%, #8b5a10 100%);
}

.coin-back {
  /* worn gold (match heads, slightly different wear pattern) */
  background:
    radial-gradient(circle at 28% 22%, rgba(255,255,255,0.38), rgba(255,255,255,0) 45%),
    radial-gradient(circle at 70% 78%, rgba(0,0,0,0.40), rgba(0,0,0,0) 58%),
    radial-gradient(circle at 24% 74%, rgba(90, 56, 16, 0.20), rgba(90, 56, 16, 0) 55%),
    radial-gradient(circle at 74% 40%, rgba(255, 232, 167, 0.16), rgba(255, 232, 167, 0) 55%),
    linear-gradient(155deg, #ffe08a 0%, #f6c453 35%, #c9921a 72%, #8b5a10 100%);
  transform: rotateY(180deg);
}

.coin-front::before,
.coin-back::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 999px;
  background:
    conic-gradient(
      from 210deg,
      rgba(255, 255, 255, 0.0),
      rgba(255, 255, 255, 0.18),
      rgba(255, 255, 255, 0.0) 55%,
      rgba(0, 0, 0, 0.0)
    );
  mix-blend-mode: screen;
  opacity: 0.7;
  pointer-events: none;
}

.coin-rim-text {
  position: absolute;
  top: 8px;
  left: 50%;
  transform: translateX(-50%);
  width: 88%;
  height: 88%;
  /* children are absolutely positioned */
  display: block;
  pointer-events: none;
  z-index: 3;
  font-weight: 900;
  font-size: 0.9rem;
  letter-spacing: 0.22em;
  text-transform: uppercase;
  color: rgba(255, 244, 210, 0.85);
  /* subtle stamped look */
  text-shadow:
    0 1px 0 rgba(0, 0, 0, 0.35),
    0 2px 10px rgba(0, 0, 0, 0.25);
  /* arc geometry (can be tuned by JS via inline vars) */
  --radius: 74px;
}

/* scale rim radius with coin size */
.coin {
  --coin-size: 180px;
}

.coin-rim-text {
  --radius: calc(var(--coin-size) * 0.41);
}

.coin-rim-text::before {
  /* "stamp" indentation illusion */
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 999px;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.10);
  opacity: 0.25;
}

.coin-rim-char {
  position: absolute;
  left: 50%;
  top: 50%;
  /* place around circle: rotate then translate upward */
  transform:
    rotate(var(--rot))
    translateY(calc(var(--radius) * -1))
    rotate(calc(var(--rot) * -1));
  transform-origin: 0 0;
  /* stamped feel */
  filter: drop-shadow(0 1px 0 rgba(0, 0, 0, 0.25));
  white-space: pre;
}

.coin-rim-char.space {
  opacity: 0.55;
}

.coin-year {
  position: absolute;
  bottom: 18px;
  left: 50%;
  transform: translateX(-50%);
  font-weight: 900;
  font-size: 0.95rem;
  letter-spacing: 0.12em;
  color: rgba(255, 244, 210, 0.86);
  z-index: 3;
  text-shadow:
    0 1px 0 rgba(0, 0, 0, 0.35),
    0 2px 10px rgba(0, 0, 0, 0.25);
}

.coin.flipping .coin-front::before,
.coin.flipping .coin-back::before {
  animation: coin-glint var(--flip-duration, 0.65s) ease-in-out;
}

@keyframes coin-glint {
  0% { transform: rotate(0deg); opacity: 0.2; }
  35% { opacity: 0.85; }
  100% { transform: rotate(120deg); opacity: 0.25; }
}

.coin-burst {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
  font-weight: 900;
  font-size: 2.25rem;
  letter-spacing: 0.02em;
  z-index: 5;
  text-shadow: 0 8px 22px rgba(0, 0, 0, 0.25);
  opacity: 0;
}

.coin-burst.show {
  animation: burst 0.85s ease-out forwards;
}

@keyframes burst {
  0% {
    transform: translate(-50%, -50%) scale(0.2) rotate(-8deg);
    opacity: 0;
    filter: blur(2px);
  }
  15% {
    opacity: 1;
    filter: blur(0px);
  }
  55% {
    transform: translate(-50%, -65%) scale(1.25) rotate(6deg);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -95%) scale(1.05) rotate(0deg);
    opacity: 0;
  }
}

/* Earned money burst over the Cash stat */
.cash-value {
  position: relative;
  display: inline-block;
}

.cash-bursts {
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
}

.cash-burst {
  position: absolute;
  left: 50%;
  top: -0.25rem;
  transform: translate(-50%, 0);
  pointer-events: none;
  font-weight: 900;
  font-size: 1.35rem;
  letter-spacing: 0.02em;
  z-index: 5;
  text-shadow: 0 8px 22px rgba(0, 0, 0, 0.25);
  color: #22c55e;
  opacity: 0;
  white-space: nowrap;
}

.cash-burst.show {
  /* slight stagger so multiple bursts don't sit perfectly on top of each other */
  --x: 0px;
  animation: cash-burst 0.85s ease-out forwards;
}

@keyframes cash-burst {
  0% {
    transform: translate(calc(-50% + var(--x)), 10px) scale(0.2) rotate(-8deg);
    opacity: 0;
    filter: blur(2px);
  }
  15% {
    opacity: 1;
    filter: blur(0px);
  }
  55% {
    transform: translate(calc(-50% + var(--x)), -14px) scale(1.1) rotate(6deg);
    opacity: 1;
  }
  100% {
    transform: translate(calc(-50% + var(--x)), -34px) scale(1.0) rotate(0deg);
    opacity: 0;
  }
}

.coin-burst.money {
  background: linear-gradient(90deg, #fbbf24, #22c55e, #60a5fa);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.face {
  font-weight: 800;
  /* slightly larger + "engraved/embossed into coin" feel */
  font-size: 6.25rem;
  font-family: ui-serif, Georgia, "Times New Roman", Times, serif;
  /* keep it close to the coin metal so it reads as stamped, not painted */
  color: rgba(255, 236, 200, 0.42);
  letter-spacing: 0.05em;
  /* engraved look: dark top-left edge, light bottom-right edge */
  text-shadow:
    -0.75px -0.75px 0 rgba(0, 0, 0, 0.28),
    0.75px 0.75px 0 rgba(255, 255, 255, 0.12),
    0 8px 18px rgba(0, 0, 0, 0.06);
  /* push the glyphs a touch "into" the face */
  transform: translateZ(0) translateY(0.5px);
  filter: saturate(0.95) contrast(1.02);
}

.result {
  position: absolute;
  bottom: -0.75rem;
  background: #111827;
  color: white;
  font-size: 0.9rem;
  padding: 0.35rem 0.6rem;
  border-radius: 999px;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.18);
}

.coin.flipping {
  animation: coin-pop var(--flip-duration, 0.65s) ease-in-out;
}

@keyframes coin-pop {
  0% {
    transform: translateY(0px) rotateX(0deg) scale(1);
  }
  35% {
    transform: translateY(-120px) rotateX(20deg) scale(1.05);
  }
  100% {
    transform: translateY(0px) rotateX(0deg) scale(1);
  }
}

.coin.flipping .coin-inner {
  animation: coin-spin var(--flip-duration, 0.65s) linear;
}

@keyframes coin-spin {
  0% {
    transform: rotateY(0deg);
  }
  100% {
    transform: rotateY(1440deg);
  }
}

.controls {
  display: flex;
  justify-content: center;
  gap: 0.75rem;
  margin-bottom: 1.25rem;
}

.reset-link {
  position: absolute;
  top: 0.9rem;
  right: 1rem;
  font-size: 0.95rem;
  color: #6b7280;
  text-decoration: underline;
  cursor: pointer;
  background: none;
  border: none;
  padding: 0;
}

.reset-link:hover {
  color: #374151;
}

.reset-link:focus {
  outline: 2px solid rgba(37, 99, 235, 0.6);
  outline-offset: 3px;
  border-radius: 6px;
}

button {
  touch-action: manipulation;
  font-size: 1rem;
  padding: 0.75rem 1.1rem;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: background-color 0.2s;
  -webkit-user-select: none;
  user-select: none;
}

.primary {
  background-color: #2563eb;
  color: #fff;
}

.primary:hover {
  background-color: #1d4ed8;
}

.secondary {
  background-color: #e5e7eb;
  color: #111827;
}

.secondary:hover {
  background-color: #d1d5db;
}

button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 0.75rem;
  margin-top: 0.25rem;
}

section.shop {
  margin-top: 1rem;
  text-align: left;
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  border-radius: 14px;
  overflow: hidden;
}

.shop-header {
  padding: 0.9rem 1rem;
  background: rgba(17, 24, 39, 0.04);
  border-bottom: 1px solid #e5e7eb;
}

.shop-title {
  font-weight: 800;
  color: #111827;
}

.shop-subtitle {
  margin-top: 0.2rem;
  font-size: 0.85rem;
  color: #6b7280;
}

.shop-items {
  display: grid;
  gap: 0.65rem;
  padding: 0.9rem;
}

.shop-item {
  width: 100%;
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 0.75rem;
  align-items: center;
  padding: 0.75rem 0.85rem;
  border-radius: 14px;
  border: 1px solid #e5e7eb;
  background: white;
  cursor: pointer;
  text-align: left;
  box-shadow: 0 4px 14px rgba(0, 0, 0, 0.04);
}

.shop-item:hover {
  border-color: rgba(37, 99, 235, 0.35);
}

.shop-item:disabled {
  opacity: 0.55;
  cursor: not-allowed;
}

.shop-item-name {
  font-weight: 800;
  color: #111827;
}

.shop-item-desc {
  margin-top: 0.2rem;
  font-size: 0.85rem;
  color: #6b7280;
  font-weight: 600;
}

.price {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.35rem 0.55rem;
  border-radius: 999px;
  background: #111827;
  color: white;
  font-weight: 800;
  font-size: 0.9rem;
  white-space: nowrap;
}

/* Hide empty price pill when an upgrade is maxed (we set textContent to '') */
.price:empty {
  display: none;
}

@media (max-width: 520px) {
  .stats {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 920px) {
  main {
    width: min(720px, calc(100vw - 2rem));
  }

  .layout {
    grid-template-columns: 1fr;
  }

  .tray {
    height: 40vh;
    min-height: 260px;
  }
}

.odds {
  margin: 0.25rem 0 1rem 0;
  padding: 0.75rem;
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  border-radius: 12px;
  text-align: left;
}

.odds-row {
  display: grid;
  grid-template-columns: 1fr 120px auto;
  gap: 0.5rem;
  align-items: center;
}

.odds label {
  color: #111827;
  font-weight: 600;
  font-size: 0.95rem;
}

.odds input {
  width: 100%;
  padding: 0.5rem 0.6rem;
  border: 1px solid #d1d5db;
  border-radius: 10px;
  font-size: 1rem;
}

.odds .unit {
  color: #6b7280;
  font-size: 0.9rem;
  white-space: nowrap;
}

.odds-help {
  margin: 0.5rem 0 0 0;
  color: #6b7280;
  font-size: 0.9rem;
}

.odds-current {
  margin-top: 0.5rem;
  color: #111827;
  font-size: 0.95rem;
}

.stat {
  background: #f3f4f6;
  border-radius: 10px;
  padding: 0.75rem 0.5rem;
}

.label {
  color: #6b7280;
  font-size: 0.85rem;
}

.value {
  color: #111827;
  font-weight: 800;
  font-size: 1.4rem;
}

/* Dark mode (system) */
@media (prefers-color-scheme: dark) {
  body {
    background: radial-gradient(circle at top, #0b1220, #060913);
    color: #e5e7eb;
  }

  main {
    background-color: #0f172a;
    box-shadow: 0 2px 18px rgba(0, 0, 0, 0.55);
  }

  .tray {
    background: #0b1220;
    border-color: #1f2937;
  }

  .tray-header {
    background: rgba(255, 255, 255, 0.03);
    border-bottom-color: #1f2937;
  }

  .tray-title {
    color: #f3f4f6;
  }

  .tray-subtitle {
    color: #9ca3af;
  }

  .log-line {
    background: #0f172a;
    border-color: #1f2937;
    color: #f3f4f6;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.35);
  }

  .coin-burst {
    text-shadow: 0 10px 24px rgba(0, 0, 0, 0.55);
  }

  h1 {
    color: #f3f4f6;
  }

  .subtitle {
    color: #9ca3af;
  }

  .reset-link {
    color: #9ca3af;
  }

  .reset-link:hover {
    color: #e5e7eb;
  }

  .result {
    background: #111827;
    color: #f9fafb;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.55);
  }

  .secondary {
    background-color: #1f2937;
    color: #f3f4f6;
  }

  .secondary:hover {
    background-color: #111827;
  }

  .odds {
    background: #0b1220;
    border-color: #1f2937;
  }

  .odds label,
  .odds-current {
    color: #f3f4f6;
  }

  .odds-help,
  .odds .unit {
    color: #9ca3af;
  }

  .odds input {
    background: #0f172a;
    border-color: #334155;
    color: #f3f4f6;
  }

  .stat {
    background: #111827;
  }

  .label {
    color: #9ca3af;
  }

  .value {
    color: #f3f4f6;
  }

  section.shop {
    background: #0b1220;
    border-color: #1f2937;
  }

  .shop-header {
    background: rgba(255, 255, 255, 0.03);
    border-bottom-color: #1f2937;
  }

  .shop-title {
    color: #f3f4f6;
  }

  .shop-subtitle {
    color: #9ca3af;
  }

  .shop-item {
    background: #0f172a;
    border-color: #1f2937;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
  }

  .shop-item:hover {
    border-color: rgba(96, 165, 250, 0.45);
  }

  .shop-item-name {
    color: #f3f4f6;
  }

  .shop-item-desc {
    color: #9ca3af;
  }

  .price {
    background: #111827;
    color: #f9fafb;
  }
}
